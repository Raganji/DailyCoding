<!DOCTYPE html>
<html>
<head>
  <title>February 8th - Simple XLT key ID checker</title>
  <meta charset="UTF-8"/>
</head>
<body>
  <h2>Getting value of an XLT key from JSON object</h2>
  <p id="demo"></p>
  <script>
    // Get text from user via a prompt
    //let enteredText = prompt("What's the key ID?");

    // Sets an example of XLT data in the format
    //const xltData = {"xlt.error":"error","xlt.success":"success","xlt.warning":"warning","xlt.ok":"ok"};

    // Defines which text is shown in the web page based on the text the user entered
    //document.getElementById("demo").innerHTML = xltData[enteredText];

    const getJSON = async url => {
      const response = await fetch(url);
      if(!response.ok) // check if response worked (no 404 errors etc...)
        throw new Error(response.statusText);

      const data = response.json(); // get JSON from the response
      console.log("Value of data1" + data);
      return data; // returns a promise, which resolves to this data value
    }

    console.log("Fetching data...");
    getJSON("https://soundcloud.com/oembed?url=http%3A//soundcloud.com/forss/flickermood&format=json").then(data => {
      console.log(data);
      console.log("Value of data2" + data);
      const convertedData = JSON.parse(data);
    }).catch(error => {
      console.error(error);
    });

    console.log("Value of convertedData: " + convertedData);
    document.getElementById("demo").innerHTML = data.author_name;

  </script>

</body>
</html>
